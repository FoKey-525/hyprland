import{_ as _export_sfc,q as defineComponent,r as useTranslation_1,g as generalStore,e as settingsStore,v as onBeforeMount,w as isInitialized,x as onBeforeUnmount,y as createElementBlock,z as createBaseVNode,B as createVNode,D as dayjs,E as getActual,G as ActualVersionOutput,R as RouterPaths,H as startVersion,I as getLanguages,J as openBlock,K as Loader,M as useRouter}from"./popup.71dac307.js";import{g as getLocked}from"./locked.4f1e4e65.js";import{g as getStatus}from"./connection.c490c47b.js";import{c as connectionStore}from"./store.7bb3311f.js";import{g as getLanguage,a as getCustomServer}from"./settings.f1da55bc.js";const _hoisted_1={class:"load"},_hoisted_2={class:"load-loader"};var Load=_export_sfc(defineComponent({__name:"Load",setup(__props){const router=useRouter(),{i18next:i18next}=useTranslation_1(),general=generalStore(),settings=settingsStore(),connection=connectionStore();let interval=null;return onBeforeMount((async()=>{interval=setInterval((async()=>{await isInitialized()&&(clearInterval(interval),interval=null,(async()=>{const language=await getLanguage();dayjs.locale(language),i18next.changeLanguage(language);const actual=await getActual();if(actual===ActualVersionOutput.FAIL)return void router.push(RouterPaths.MISTAKE);if(actual===ActualVersionOutput.LOW)return await startVersion(),void router.push(RouterPaths.VERSION);const status=await getStatus();connection.setActive(status),connection.setBusy(!1),general.setLanguages(await getLanguages()),settings.setCustomServerValue(await getCustomServer()),settings.setLanguage(language),(await getLocked()).length?router.push(RouterPaths.LOCKED):general.route?router.push(general.route):router.push(RouterPaths.UPDATE)})())}),1e3)})),onBeforeUnmount((()=>{clearInterval(interval),interval=null})),(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createVNode(Loader)])]))}}),[["__scopeId","data-v-a1170556"]]);export{Load as default};
