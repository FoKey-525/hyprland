import{a as bridgePopupBackground,aS as AppEvents,_ as _export_sfc,q as defineComponent,r as useTranslation_1,a1 as onMounted,aT as RECONNECT_INTERVAL,x as onBeforeUnmount,y as createElementBlock,z as createBaseVNode,T as toDisplayString,V as unref,B as createVNode,a3 as Button,aU as getHealth,G as ActualVersionOutput,H as startVersion,aG as startMain,J as openBlock,R as RouterPaths,aA as openLink,X as pushScopeId,Y as popScopeId,aV as _imports_0,M as useRouter}from"./popup.71dac307.js";import{u as updateStorageAndStandartServer}from"./settings.f1da55bc.js";const _hoisted_1={class:"mistake"},_hoisted_2={class:"upper"},_hoisted_3=(n=>(pushScopeId("data-v-23cae79d"),n=n(),popScopeId(),n))((()=>createBaseVNode("img",{src:_imports_0,class:"face"},null,-1))),_hoisted_4={class:"info"},_hoisted_5={class:"title"},_hoisted_6={class:"subtitle"},_hoisted_7={class:"bottom"};var Mistake=_export_sfc(defineComponent({__name:"Mistake",setup(__props){const{t:t}=useTranslation_1(),router=useRouter();let interval=null;const check=async()=>{await getHealth()||await updateStorageAndStandartServer();if(!(await getHealth()))return;const actual=await bridgePopupBackground.emit(AppEvents.ActualVersion.Name);actual!==ActualVersionOutput.FAIL&&(actual!==ActualVersionOutput.LOW?await startMain():startVersion())};return onMounted((()=>{check(),interval=setInterval((()=>check()),RECONNECT_INTERVAL)})),onBeforeUnmount((()=>{clearInterval(interval),interval=null})),(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[_hoisted_3,createBaseVNode("div",_hoisted_4,[createBaseVNode("div",_hoisted_5,toDisplayString(unref(t)("mistake.message.title")),1),createBaseVNode("div",_hoisted_6,toDisplayString(unref(t)("mistake.message.subtitle")),1)])]),createBaseVNode("div",_hoisted_7,[createVNode(Button,{text:unref(t)("mistake.settings"),"is-dark":!0,onClick:_cache[0]||(_cache[0]=$event=>{return value=unref(RouterPaths).SETTINGS_APPLICATION,router.push(value);var value})},null,8,["text"]),createBaseVNode("div",{class:"btn",onClick:_cache[1]||(_cache[1]=$event=>unref(openLink)("https://t.me/net4ebur_support"))},toDisplayString(unref(t)("mistake.support")),1)])]))}}),[["__scopeId","data-v-23cae79d"]]);export{Mistake as default};
