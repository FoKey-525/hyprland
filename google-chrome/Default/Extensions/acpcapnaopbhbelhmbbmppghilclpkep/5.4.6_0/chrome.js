(()=>{var t={500:function(t,e,n){var i={scope:{},findInternal:function(t,e,n){t instanceof String&&(t=String(t));for(var i=t.length,o=0;o<i;o++){var s=t[o];if(e.call(n,s,o,t))return{i:o,v:s}}return{i:-1,v:void 0}}};i.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:void 0!==n.g&&null!=n.g?n.g:t},i.global=i.getGlobal(this),i.polyfill=function(t,e,n,o){if(e){for(n=i.global,t=t.split("."),o=0;o<t.length-1;o++){var s=t[o];s in n||(n[s]={}),n=n[s]}(e=e(o=n[t=t[t.length-1]]))!=o&&null!=e&&i.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},i.polyfill("Array.prototype.find",(function(t){return t||function(t,e){return i.findInternal(this,t,e).v}}),"es6-impl","es3"),function(){function t(){return"undefined"!=typeof _WTFONT&&_WTFONT?(e.restore(),!1):(e.setJQuery(wf$),e.setCSSURL(chrome.runtime.getURL("style.css")),e.init(),!0)}var e=e||function(){var t,e,n,i,o=[],s=function(e,n,i){i=i||{},this.data=[],s.isSupported&&(this.typeInfo=e,this.text=n||"abcdefghijklmnopqrstuvwxyz",this.canvas_options=t.extend(this.canvas_options,i),this.canvas=t("<canvas>")[0],this.draw())};s.isSupported=!!document.createElement("canvas").getContext,s.prototype={canvas_options:{fillStyle:"rgb(0,0,0)",height:50,size:"40px",textBaseline:"top",width:600},getFontOption:function(){return this.typeInfo.style+" "+this.typeInfo.weight+" "+this.canvas_options.size+" "+this.typeInfo.fonts},draw:function(){var e=this.canvas.getContext("2d");return t.each(this.canvas_options,(function(t,n){e[t]=n})),e.font=this.getFontOption(),e.fillText(this.text,0,0),this.data=e.getImageData(0,0,this.canvas_options.width,this.canvas_options.height).data},isEqual:function(t){var e=this.canvas_options.width*this.canvas_options.height*4,n=this.data,i=t.data;for(t=0;t<e;t+=1)if(n[t]!==i[t])return!1;return!0}},(i=function(e){this.element=t(e),this.detect()}).roundFloatWithPxUnit=function(t){return t=Math.round(parseFloat(t)),isNaN(t)?"?":t+"px"},i.prototype={detect:function(){this.detectBasicCSS(),this.variant=this.getVariant(),this.stack=this.fonts.split(/,\s*/),this.testCanvas=new s(this),this.current=this.getCurrentFont()},detectBasicCSS:function(){this.fonts=this.element.css("font-family"),this.weight=this.element.css("font-weight"),this.style=this.element.css("font-style"),this.size=i.roundFloatWithPxUnit(this.element.css("font-size")),this.lineHeight=i.roundFloatWithPxUnit(this.element.css("line-height")),this.color=this.element.css("color")},getFullCSS:function(){for(var t=["font-family","font-weight","font-style"],e={},n=0;n<t.length;n++)e[t[n]]=this.element.css(t[n]);return e},getVariant:function(){return"normal"===this.weight&&"normal"===this.style?"regular":"normal"===this.weight?this.style:"normal"===this.style?this.weight:this.weight+" "+this.style},getCurrentFont:function(){for(var e,i,o=this.stack.slice(0),a=0;a<this.stack.length;a++)if(e=t.extend({},this,{fonts:o[a]+" ,serif",stack:[o[a],"serif"]}),i=t.extend({},this,{fonts:o[a]+", sans-serif",stack:[o[a],"sans-serif"]}),e=new s(e),i=new s(i),e.isEqual(i)&&this.testCanvas.isEqual(e))return o[a];return n&&(a=t.extend({},this,{fonts:n,stack:[n]}),a=new s(a),this.testCanvas.isEqual(a))?n:o[0]}};var a={STYLE_PRE:"__whatfont_",init:function(){a.$el=t("<link>").attr({rel:"stylesheet",href:chrome.runtime.getURL("in.css")}).appendTo("head")},restore:function(){a.$el&&a.$el.remove()},getClassName:function(t){return t="string"==typeof t?[t]:t,a.STYLE_PRE+t.join(" "+a.STYLE_PRE)}},l={getSlugWithCSSName:{},fontData:{},services:{},init:function(){l.typekit(),l.google(),l.fontdeck()},typekit:function(){t("script").each((function(t){if(t=this.src.match(/use\.typekit\.(com|net)\/(.+)\.js/))return t[2],!1}))},google:function(){t("link").each((function(e,n){var i=t(n).attr("href");0<=i.indexOf("fonts.googleapis.com/css?")&&(i=i.match(/\?family=([^&]*)/)[1].split("|"),t.each(i,(function(t,e){var n=e.split(":")[0],i=n.replace(/\+/g," "),o=i.replace(/ /g,"-").toLowerCase();l.getSlugWithCSSName[i]=o,l.fontData[o]=l.fontData[o]||{name:i,services:{}},l.fontData[o].services.Google={url:"http://www.google.com/webfonts/family?family="+n}})))}))},fontdeck:function(){var e=[],n=location.hostname;t("link").each((function(n,i){var o=t(i).attr("href");0<=o.indexOf("fontdeck.com")&&(o=o.match(/^.*\/(\d+)\.css$/))&&e.push(o[1])})),t("script").each((function(n,i){var o=t(i).attr("src");void 0!==o&&0<=o.indexOf("fontdeck.com")&&(o=o.match(/^.*\/(\d+)\.js$/))&&e.push(o[1])})),t.each(e,(function(e,i){t.getJSON("http://fontdeck.com/api/v1/project-info?project="+i+"&domain="+n+"&callback=?",(function(e){void 0!==e&&void 0!==e.provides&&t.each(e.provides,(function(t,e){var n=e.name,i=n.replace(/ /g,"-").toLowerCase(),o=n.split(" ")[0];o=e.url||"http://fontdeck.com/search?q="+o,l.getSlugWithCSSName[n]=i,l.fontData[i]=l.fontData[i]||{name:n,services:{}},l.fontData[i].services.Fontdeck={url:o}}))}))}))},getFontDataByCSSName:function(t){return t=t.replace(/^"|'/,"").replace(/"|'$/,""),(t=l.getSlugWithCSSName[t])&&l.fontData[t]?l.fontData[t]:null},getFontNameByCSSName:function(t){return t=t.replace(/^"|'/,"").replace(/"|'$/,""),(t=l.getSlugWithCSSName[t])&&l.fontData[t]?l.fontData[t].name:null}},r=function(){this.currentCacheId=-1,this.el=t.wfElem("div",["tip","elem"],""),this.$el=t(this.el),this.init()};r.prototype={init:function(){var e=this;this.$el.appendTo("body"),t("body :visible").on("mousemove.wf",(function(n){e.update(t(this),n),e.show(),n.stopPropagation()})),t("body").on("mouseout.wf",(function(t){e.hide()}))},hide:function(){this.$el.hide()},show:function(){this.$el.show()},update:function(t,e){var n=t.data("wfCacheId");this.updatePosition(e.pageY,e.pageX),this.element!==t&&(n||(n=o.length,o.push(void 0)),this.element=t,this.element.data("wfCacheId",n),o[n]=this.typeInfo=o[n]||new i(t),this.updateText(this.typeInfo.current))},updatePosition:function(t,e){this.$el.css({top:t+12,left:e+12})},updateText:function(t){this.$el.text(t).css("display","inline-block")},remove:function(){this.$el.remove(),t("body :visible").off("mousemove.wf"),t("body").off("mouseout.wf")}};var c={fontServiceIcons:{},init_tmpl:function(){var e;c.tmpl=(e=t('<div class="elem panel"><div class="panel_title"><span class="title_text"></span><a class="close_button" title="Close">&times;</a></div><div class="panel_content"><ul class="panel_properties"><li><dl class="font_family"><dt class="panel_label">Family</dt><dd class="panel_value"></dd></dl></li><li><div class="style_weight"><dl class="font_style"><dt class="panel_label">Style</dt><dd class="panel_value"></dd></dl><dl class="font_weight"><dt class="panel_label">Weight</dt><dd class="panel_value"></dd></dl><dl></dl></div></li><li><div class="size_line_height_color"><dl class="size section"><dt class="panel_label">Size</dt><dd class="panel_value"></dd></dl><dl class="line_height"><dt class="panel_label">Line Height</dt><dd class="panel_value"></dd></dl><dl class="color"><div class="color_info"><dt class="panel_label">Color</dt><dd class="panel_value"><a title="Click to change color format" class="color_info_sample">&nbsp;</a><span class="color_info_value"></span></dd></dl></div></li><li class="panel_no_border_bottom"><dl class="type_info clearfix"><dt class="panel_label"></dt><dd class="type_preview">AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz</dd></dl></li></ul><div class="panel_tools clearfix"><div class="panel_tools_left"><div class="font_services" style="display:none;">Via </div></div><div class="panel_tools_right"></div></div></div></div>'),function(){return e.clone()})},init:function(){t("body :visible").on("click.wf",c.pin),c.init_tmpl(),c.panels=t([]),c.fontServiceIcons.Typekit=t("<span>").addClass("service_icon service_icon_typekit").text("Typekit"),c.fontServiceIcons.Google=t("<span>").addClass("service_icon service_icon_google").text("Google Web Fonts"),c.fontServiceIcons.Fontdeck=t("<span>").addClass("service_icon service_icon_fontdeck").text("Fontdeck")},restore:function(){t("body :visible").unbind("click.wf",c.pin),c.panels.remove()},convertClassName:function(e){return e.find("*").add(e).each((function(e,n){var i=t(n).attr("class");(i=""===i?"basic":i+" basic")&&(i=i.split(" "),t(n).attr("class",a.getClassName(i)))})),e},typePreview:function(e,n){return t(n).find(".type_preview").css(e.getFullCSS()),n},fontService:function(e,n){var i,o=l.getFontDataByCSSName(e.current);return i=t("<ul>").addClass("font_service"),o?(t.each(o.services,(function(e,n){t("<li>").append(t("<a>").append(t(c.fontServiceIcons[e]).clone()).attr("href",n.url).attr("target","_blank")).appendTo(i)})),t(n).find(".font_services").append(i).show()):t(n).find(".font_services").hide(),n},fontFam:function(e,n){var i,o=e.fonts.replace(/;/,"").split(/,\s*/),s=e.current,l=!1;for(e.fonts.replace(/;/,"").split(/,\s*/),i=0;i<o.length;i+=1){if(o[i]===s){o[i]="<span class='fiu'>"+o[i]+"</span>",l=!0;break}o[i]="<span class='fniu'>"+o[i]+"</span>"}return o=o.join(", ")+";",l||(o+=" <span class='.fiu'>"+s+"</span>"),o="<div class="+a.getClassName("fontfamily_list")+">"+o+"</div>",t(n).find(".font_family>dd").html(o),n},fontWeight:function(t,e){var n=t.weight;e.find(".font_weight>dd").text(n)},fontStyle:function(t,e){var n=t.style;e.find(".font_style>dd").text(n)},sizeLineHeight:function(e,n){var i=e.size,o=e.lineHeight;return t(n).find(".size>dd").text(i),t(n).find(".line_height>dd").text(o),n},color:function(e,n){function i(t,e){t.css("visibility","hidden"),t.css("font-size",""),t.text("1");var n=t.height(),i=parseInt(t.css("font-size"),10);for(t.text(e);t.height()>n&&0<=i;)i--,t.css("font-size",i+"px");0===i&&t.css("font-size",""),t.css("visibility","")}var o,s,a,l=e.color,r=t(n).find(".color_info_sample"),c=t(n).find(".color_info_value");-1!==l.indexOf("rgba")?(r.hide(),setTimeout((function(){i(c,l)}),0)):(o=l.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/),s=parseInt(o[1],10).toString(16),a=parseInt(o[2],10).toString(16),o=parseInt(o[3],10).toString(16),s=1===s.length?"0"+s:s,a=1===a.length?"0"+a:a,o=1===o.length?"0"+o:o,s=[l,"#"+s+a+o],r.css("background-color",l).click(function(t,e,n){return function(o){return e=(e+1)%t.length,i(n,t[e]),o.preventDefault(),!1}}(s,0,c)).click())},tweet:function(e,n){var i=t(n).find(".tweet_icon"),o=e.current,s=l.getFontNameByCSSName(o)||o;i.click((function(){var t=i.attr("href");return c.takeScreenshot(n.e,n,(function(){t+="?text="+encodeURIComponent("Check this design out with "+s+".")+"&url="+encodeURIComponent(e.designURL||window.location.href)+"&via=What_Font",window.open(t,"","height=430,width=550")})),!1}))},panelContent:function(e,n){t("typePreview fontService fontFam fontWeight fontStyle sizeLineHeight color tweet".split(" ")).each((function(t,i){c[i](e,n)}))},panelTitle:function(e,n){var i=e.current;return i=(l.getFontNameByCSSName(i)||i)+" - "+e.variant,t(n).find(".title_text").html(i),function(e){t(e).find(".close_button").click((function(n){return t(e).remove(),n.stopPropagation(),!1}))}(n),n},get:function(e){var n=c.tmpl();return e=new i(e),c.panelTitle(e,n),c.panelContent(e,n),c.convertClassName(n),n.typeInfo=e,t(n).click((function(e){t("html > .__whatfont_panel").last()[0]!==n[0]&&(t(this).find("*").css("-webkit-animation","none"),t(this).detach(),t(this).appendTo("html"))})),n},takeScreenshot:function(t,e,n){},showPanel:function(e,n){t(n).css({top:e.pageY+12,left:e.pageX-13}).appendTo("html"),c.panels=c.panels.add(n)},pin:function(t){var n;e.hide(),(n=c.get(this)).e=t,c.showPanel(t,n),t.stopPropagation(),t.preventDefault()},hideAll:function(){t(c.panels).hide()},showAll:function(){t(c.panels).find("*").css("-webkit-animation","none"),t(c.panels).show()}},f={TOOLBAR:null,init:function(){var e=t.wfElem("div","exit","Exit What Font");t.wfElem("div","help","<strong>Hover</strong> to identify<br /><strong>Click</strong> to pin a detail panel"),f.TOOLBAR=t("<div>").addClass(a.getClassName(["elem","control"])).append(e).appendTo("body"),t(e).click((function(){d.restore()}))},restore:function(){t(f.TOOLBAR).remove()}},d={shortcut:function(t){27===(t.keyCode||t.which)&&(d.restore(),t.stopPropagation())},restore:function(n){t("body :visible").unbind("mousemove",d.updateTip),t("body :visible").unbind("click",d.pinPanel),f.restore(),e.remove(),c.restore(),a.restore(),t("body").unbind("keydown",d.shortcut),t(window).unbind("resize.whatfont"),window._WTFONT=!1},init:function(o){if(o=o||{},!t&&jQuery&&(t=jQuery),void 0!==window._WTFONT&&window._WTFONT||!t)return!1;window._WTFONT=!0,t.wfElem=function(e,n,i,o){var s=t("<"+e+">");return i=i||"",(n="string"==typeof(n=n||[])?[n]:n).push("basic"),s.addClass(a.getClassName(n)),"string"==typeof i?s.html(i):i.constructor===Array?t.map(i,(function(t,e){return s.append(t)})):s.append(i),void 0!==o&&s.attr(o),s[0]},function(){var e=t("<p>").css("font-family","S0m3F0n7"),o=t("<p>").css("font-family","serif"),a=t("<p>").css("font-family","sans-serif");e=new s(new i(e)),o=new s(new i(o)),new s(new i(a)),n=e.isEqual(o)?"serif":"sans-serif"}(),o.isDisablingUI||(a.init(),e=new r,c.init(),f.init(),t("body").keydown(d.shortcut)),l.init(),u.fullScreenshot=null,t(window).bind("resize.whatfont",(function(){u.fullScreenshot=null}))}},u={captureAll:!0,format:"image/jpeg",quality:.7,capturer:function(e,n){var i,o;n=n||{},i=t(window).scrollTop(),o=t(window).scrollLeft(),s.isSupported,e(),t(window).scrollTop(i),t(window).scrollLeft(o)},takeFullScreenshot:function(t){if(u.fullScreenshot)return t(u.fullScreenshot);u.capturer((function(e){u.fullScreenshot=e,t(e)}),{quality:u.quality,format:u.format})},takePartialScreenshot:function(t){c.hideAll(),window.setTimeout((function(){u.capturer((function(e){c.showAll(),t(e)}))}),0)},takeCroppedScreenshot:function(e,n,i,o,s,a){var l,r,c;l=u.captureAll?u.takeFullScreenshot:u.takePartialScreenshot,void 0!==n&&(r=o-n,c=s-i),l((function(o){var s;return o?(void 0===n?e(o):((s=new Image).src=o,s.onload=function(){var o,l;(o=t("<canvas>")[0]).width=r,o.height=c,(l=o.getContext("2d")).fillStyle="rgba(255,255,255,1)",l.fillRect(0,0,r,c),l.drawImage(s,n,i,r,c,0,0,r,c),o=o.toDataURL(a.format||u.format,a.quality||u.quality),e(o)}),!0):e()}),a=a||{})}};return{setJQuery:function(e){t=e},setCSSURL:function(t){a.CSS_URL=t},init:d.init,restore:d.restore}}();chrome.runtime.onMessage.addListener((function(e,n,i){"initOrRestore"===e.action&&i(t())})),chrome.runtime.sendMessage({action:"onload"},(function(t){}))}(),chrome.runtime.sendMessage({method:"getUid"},(function(t){}))}},e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t[500](0,{},e)})();